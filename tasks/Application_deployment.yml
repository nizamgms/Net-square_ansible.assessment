---
  - name: copy files to deploy
    copy: 
      src: "{{ item }}"
      dest: "{{ deployment_path }}"
      owner: root
      mode: 0755
    with_fileglob:
    - "../files/app.py"
    - "../files/{{ wheel_file }}"

  - name: deploying wheel file
    pip:
        name: "{{ deployment_path }}/{{ wheel_file }}"
        virtualenv: "{{ deployment_path }}"
        state: present

  - name: running the flask application in virtual environment
    shell: flask run -p "{{ port }}"
